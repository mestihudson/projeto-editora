<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/_template.xhtml">			
	<ui:define name="head">
	
	<div id="titulo" style="background: #EFF3FA; height: 24px; width: 95%" align="left">
		<h:outputText value="Cliente > Clientes Cadastrados" styleClass="title" style="line-height: 20px;" />
		<div style="background: #C4D2EB; height: 2px;" ></div>	
	</div>
	
	</ui:define>
	
	<ui:define name="body">

		<div class="Centralizar" style="background: white;" >
		
<!-- 		Acesso nÃ£o permitido -->
		<h:form rendered="#{loginBean.usuario.perfil.id>2}">
		<div align="center">
		
			<br />		
			<p:graphicImage value="/resources/img/noacsses.png" />
			<br /><br /><br /><br />
			
			<a href="javascript:history.back(-1)">Voltar</a><br />

		
		</div>
		</h:form>	
			
<!-- 			acesso administrador e gerente		 -->
			<h:form id="form_acesso1" rendered="#{loginBean.usuario.perfil.id==1 or loginBean.usuario.perfil.id==2}">
			
			<fieldset style="border: 1px solid #6A6A6A; border-top: 0;">
			
			<div style="background: #394674; align-top: center; height: 20px; line-height: 20px;" align="center" >
				<h:outputText value="CLIENTES CADASTRADOS" style="color: white; font-size: 12px;" styleClass="OutPut" />
			</div>	
			
			<p:focus context="autocompletePesquisar" />
			
			<h:outputText value="Nome: " styleClass="OutPut"  />
			<p:autoComplete value="#{usuarioBean.usuario.nome}" completeMethod="#{usuarioBean.autocompletenome}" var="u" itemValue="#{u}" itemLabel="#{u}" 
			minQueryLength="10" maxResults="5" queryDelay="30" id="autocompletePesquisar" size="50" />
			
			<p:commandButton value="Pesquisar" id="botaoPesquisar" action="#{usuarioBean.getListaUsuariosByName}" ajax="false"  />
	 		<br /><br />	
			
			<p:dataGrid var="usuario" value="#{usuarioBean.clienteCadastrados}" columns="3" rows="12" paginator="true" paginatorPosition="bottom"
	 		emptyMessage="">
	 		
	 			<p:panel header="#{usuario.nome}" style="text-align:center">
					<h:panelGrid columns="1" style="width:100%">
					
					<h:outputText value="Email: #{usuario.login}" /> 
										
					<h:outputText value="CPF: #{usuario.cpf}" /> 
					
					<h:outputText value="Data de Nascimento" />
					<h:outputText value="#{usuario.nascimento}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
					
					<h:outputText value="Cliente desde" />
					<h:outputText value="#{usuario.data.time}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
					
					<h:outputText value="Status: #{usuario.status}" /> 
										
					</h:panelGrid>
				</p:panel>
			
			</p:dataGrid>		
					
			</fieldset>

				<div align="left" style="width: 350px; margin-right: 500px;">
					<p:messages autoUpdate="true" />
				</div>

			</h:form>
			
			<p:dialog rendered="#{loginBean.usuario.id==null}" visible="true" resizable="false" closable="false" modal="true">
				<div align="center">

					<br />
					<p:graphicImage value="/resources/img/noacsses.png" />
					<br />
					<br />
					<br />
					<br /> <a href="javascript:history.back(-1)">Voltar</a><br />

				</div>
			</p:dialog>

		
	</div>	
	</ui:define>		
	
</ui:composition>	
</html>