<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/_template.xhtml">			
	<ui:define name="head">
	
	<div id="titulo" style="background: #EFF3FA; height: 24px; width: 95%" align="left">
		<h:outputText value="Cliente > Clientes Cadastrados" styleClass="title" style="line-height: 20px;" />
		<div style="background: #C4D2EB; height: 2px;" ></div>	
	</div>
	
	</ui:define>
	
	<ui:define name="body">

		<div class="Centralizar" style="background: white;" >
		
<!-- 		Acesso não permitido -->
		<h:form rendered="#{loginBean.usuario.perfil.id==4}">
		<div align="center">
		
			<br />		
			<p:graphicImage value="/resources/img/noacsses.png" />
			<br /><br /><br /><br />
			
			<a href="javascript:history.back(-1)">Voltar</a><br />

		
		</div>
		</h:form>	
			
<!-- 			acesso administrador e gerente		 -->
			<h:form id="form_acesso1" rendered="#{loginBean.usuario.perfil.id!=4}">
			
			<fieldset style="border: 1px solid #6A6A6A; border-top: 0;">
			
			<div style="background: #394674; align-top: center; height: 20px; line-height: 20px;" align="center" >
				<h:outputText value="CLIENTES CADASTRADOS" style="color: white; font-size: 12px;" styleClass="OutPut" />
			</div>	
			
			<p:focus context="autocompletePesquisar" />
			
			<h:panelGrid columns="5" cellspacing="5">
			
				<p:selectOneMenu value="#{usuarioBean.box4Search}" styleClass="OutPut" style="width: 80px;" >
					<f:selectItem itemLabel="Nome" itemValue="nome" />
					<f:selectItem itemLabel="CPF" itemValue="cpf" />
					<f:ajax listener="#{usuarioBean.checkBox4Search}" event="blur" />
				</p:selectOneMenu>
									
				<p:autoComplete value="#{usuarioBean.search}" completeMethod="#{usuarioBean.autocomplete}" var="f" itemValue="#{f}" itemLabel="#{f}" 
				minQueryLength="3" maxResults="5" queryDelay="300" id="autocompletePesquisar" size="60" />
				
				<p:commandButton value="Pesquisar" id="botaoPesquisar" action="#{usuarioBean.getListarClientes}" ajax="false" icon="ui-icon-search" />
				
			</h:panelGrid>	
			<br />	
			
			<p:dataGrid var="usuario" value="#{usuarioBean.clientesCadastrados}" columns="3" rows="6" paginator="true" paginatorPosition="bottom"
	 		emptyMessage="Não encontrado">
	 		
	 			<p:panel header="#{usuario.nome}" style="text-align:center" footer="CPF: #{usuario.cpf}">
					<h:panelGrid columns="1" style="width:100%">
					
					<h:outputText value="Email: #{usuario.login}" /> 
												
					<h:outputText value="Data de Nascimento" />
					<h:outputText value="#{usuario.nascimento}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
					
					<h:outputText value="Cliente desde" />
					<h:outputText value="#{usuario.data.time}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
					
					<p:commandLink update=":form_dlg:display"
						oncomplete="dlgEnd.show()">
						<h:outputText styleClass="ui-icon ui-icon-plusthick"
							style="margin:0 auto;" />
							<f:setPropertyActionListener value="#{usuario}"
									target="#{usuarioBean.usuario}" />
					</p:commandLink>

					</h:panelGrid>
				</p:panel>
			
			</p:dataGrid>		
					
			</fieldset>

				<div align="left" style="width: 350px; margin-right: 500px;">
					<p:messages autoUpdate="true" />
				</div>

			</h:form>
			
			<p:dialog header="Informações de Endereço do Cliente" modal="true" resizable="false"
			showEffect="fade" hideEffect="fade" widgetVar="dlgEnd">
			<h:form id="form_dlg">
			
				<h:panelGrid id="display" columns="2" cellspacing="10">
				
				<p:panel header="Endereço">
				
					<h:outputLabel value="Estado: " for="estado" styleClass="OutPut" />
					<h:outputText id="estado" value="#{usuarioBean.usuario.endereco.unidade}"
						styleClass="OutPut" />
					<br /><br />
					
					<h:outputLabel value="Município: " for="muni" styleClass="OutPut" />
					<h:outputText id="muni" value="#{usuarioBean.usuario.endereco.municipio}"
						styleClass="OutPut" />
					<br /><br />
					
					<h:outputLabel value="Logradouro: " for="logra" styleClass="OutPut" />
					<h:outputText id="tipologra" value="#{usuarioBean.usuario.endereco.tipoLogradouro} " styleClass="OutPut" />
					<h:outputText id="logra" value="#{usuarioBean.usuario.endereco.logradouro}" styleClass="OutPut" />
					<br /><br />
					
					<h:outputLabel value="Número: " for="nu" styleClass="OutPut" />
					<h:outputText id="nu" value="#{usuarioBean.usuario.endereco.numero}" styleClass="OutPut" />
					<br /><br />
					
					<h:outputLabel value="Bairro: " for="bairro" styleClass="OutPut" />
					<h:outputText id="bairro" value="#{usuarioBean.usuario.endereco.bairro}" styleClass="OutPut" />
					<br /><br />
					
					<h:outputLabel value="CEP: " for="cep" styleClass="OutPut" />
					<h:outputText id="cep" value="#{usuarioBean.usuario.endereco.cep}" styleClass="OutPut" />
				
				</p:panel>
				</h:panelGrid>
				
			</h:form>
			</p:dialog>	
			
			<p:dialog rendered="#{loginBean.usuario.id==null}" visible="true" resizable="false" closable="false" modal="true">
				<div align="center">

					<br />
					<p:graphicImage value="/resources/img/noacsses.png" />
					<br />
					<br />
					<br />
					<br /> <a href="javascript:history.back(-1)">Voltar</a><br />

				</div>
			</p:dialog>

		
	</div>	
	</ui:define>		
	
</ui:composition>	
</html>